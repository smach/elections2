<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Calculate winners, percents, and victory/loss margins from a spreadsheet or CSV of election results.
    Additional functions make it easy to generate bar graphs and maps from the data.">
<title>Wrangle and Visualize Election Data With 2 Candidates or Choices • elections2</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Wrangle and Visualize Election Data With 2 Candidates or Choices">
<meta property="og:description" content="Calculate winners, percents, and victory/loss margins from a spreadsheet or CSV of election results.
    Additional functions make it easy to generate bar graphs and maps from the data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">elections2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/barcharts.html">Barcharts</a>
    <a class="dropdown-item" href="articles/intro.html">Intro</a>
    <a class="dropdown-item" href="articles/maps.html">Maps</a>
    <a class="dropdown-item" href="articles/tables.html">Tables</a>
    <a class="dropdown-item" href="articles/turnout.html">Mapping Turnout</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/smach/elections2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="elections2">elections2<a class="anchor" aria-label="anchor" href="#elections2"></a>
</h1></div>
<p>Wrangle and Visualize Election Data Easily analyze your election results data with the election2 package. One command calculates winners and percents for each election district row as well as overall totals.</p>
<p>Then, take those results and turn them into interactive tables, bar charts, and maps with functions like <code><a href="reference/bargraph_of_margins.html">bargraph_of_margins()</a></code>, <code><a href="reference/quick_table.html">quick_table()</a></code>, and <code><a href="reference/map_election_results.html">map_election_results()</a></code>.</p>
<p>election2 is designed for journalists, hobbyists, analysts, and data geeks who want to quickly go from a spreadsheet or CSV file with raw vote totals to visualizations that help you see trends behind the data.</p>
<p>Note: This package is not on CRAN, so you need to install it from GitHub with the R package and function of your choice, such as</p>
<p><code>devtools::install_github("smach/elections2", build_vignettes = TRUE)</code></p>
<div class="section level2">
<h2 id="data-wrangling">Data wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"></a>
</h2>
<p>To use elections2 for your elections data, start with one of the package functions that wrangle a spreadsheet or CSV file with election results. You’ve got two options: <code><a href="reference/wrangle_results.html">wrangle_results()</a></code> to generate detailed results from a file <em>with only two candidates or choices;</em> and <code><a href="reference/wrangle_more_cols.html">wrangle_more_cols()</a></code> for results with <em>more than two choices.</em></p>
<div class="section level3">
<h3 id="data-with-only-2-choices">Data with only 2 choices<a class="anchor" aria-label="anchor" href="#data-with-only-2-choices"></a>
</h3>
<p><code><a href="reference/wrangle_results.html">wrangle_results()</a></code> is for when you want to compare the performance of only two candidates or a yes-no ballot question. That means you don’t wish to include additional results such as third parties, write-ins, or blanks.</p>
<p>The function returns winner, percents, and percent and vote margins for each row as well as an overall total. The function also has a turnout_columns option if your data includes columns for vote totals and total registered voters and you’d like to calculate turnout percentage.</p>
<p>After running <code><a href="reference/wrangle_results.html">wrangle_results()</a></code> on your data, you can use this package’s visualization functions on the results to create tables, bar graphs, and maps.</p>
<div class="section level4">
<h4 id="data-format">Data format<a class="anchor" aria-label="anchor" href="#data-format"></a>
</h4>
<p><code><a href="reference/wrangle_results.html">wrangle_results()</a></code> needs your data to be in a very specific format.</p>
<p>If your CSV file or spreadsheet doesn’t include turnout data, that election results file <em>must</em> be in the following 3-column format:</p>
<p><strong>Column 1</strong> should be the election districts (such as precinct, city, county, etc.). <strong>Columns 2 and 3</strong> should be the candidates’ names, “Yes” and “No” for ballot questions, etc. The values should be <em>raw vote totals</em> and not percents.</p>
<p>Do <em>not</em> include any column or row totals in the file!</p>
<p>If your data <em>does</em> have turnout information, set turnout_columns = TRUE as an argument in <code><a href="reference/wrangle_results.html">wrangle_results()</a></code>. Your data needs to have total number of votes in column 4 and total number of registered voters in column 5. <em>Don’t</em> include a column for turnout percent, as this will be calculated by <code><a href="reference/wrangle_results.html">wrangle_results()</a></code>.</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/smach/elections2" class="external-link">elections2</a></span><span class="op">)</span></span>
<span><span class="va">results_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"FakeElectionResults.xlsx"</span>, package <span class="op">=</span> <span class="st">"elections2"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_election_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wrangle_results.html">wrangle_results</a></span><span class="op">(</span><span class="va">results_file</span><span class="op">)</span></span></code></pre>
<p>You can see result of <code><a href="reference/wrangle_results.html">wrangle_results()</a></code> with a command such as:</p>
<p><code>head(my_election_data, n = 3)</code></p>
<p>It includes a Total row.</p>
<p>Per a user request, wrangle_results() <em>also</em> can take the name of a data frame with data in the proper format. The name of the object <em>must</em> be in quotation marks.</p>
</div>
</div>
<div class="section level3">
<h3 id="data-with-3-or-more-choices">Data with 3 or more choices<a class="anchor" aria-label="anchor" href="#data-with-3-or-more-choices"></a>
</h3>
<p>To analyze and visualize election results with three or more choices – a crowded primary or a multi-party election, for example – use the <code><a href="reference/wrangle_more_cols.html">wrangle_more_cols()</a></code> function.</p>
<p>For this function, your results spreadsheet or CSV should have the election district (precinct, city, etc.) in the first column. Vote totals (for candidates, parties, etc.) should be in a format with one column for each candidate Don’t include a total row or column, since those will be calculated.</p>
<p><code><a href="reference/wrangle_more_cols.html">wrangle_more_cols()</a></code> has two required arguments: election_results_file, the file name; and votes_cols, a vector of character strings with all the vote columns by candidate/party/option. votes_cols can also be an vector of integers with column index numbers instead of names if the optional argument use_column_numbers is set to TRUE.</p>
<p>Per a user request, <code><a href="reference/wrangle_more_cols.html">wrangle_more_cols()</a></code> <em>also</em> can take the name of a data frame with data in the proper format. The name of the object <em>must</em> be in quotation marks.</p>
<p><code><a href="reference/wrangle_more_cols.html">wrangle_more_cols()</a></code> also has five optional logical arguments: show_pcts to return results as percents instead of total votes, show_runnerup to include a column with the 2nd-place finisher, show_margin to display a column with the difference between the 1st- and 2nd-place finishers, show_margin_2vs3 to show the difference between the 2nd- and 3rd-place finishers, and use_column_numbers if you want to use column index numbers instead of column names for the vector of vote columns.</p>
<p>In the example below, I have a file of fake results for the “Red”, “Blue”, and “Green” parties. I’d like to show results as percents, and I don’t want a column for the runner up:</p>
<pre><code><span><span class="va">myfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Fake3Columns.xlsx"</span>, package <span class="op">=</span> <span class="st">"elections2"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wrangle_more_cols.html">wrangle_more_cols</a></span><span class="op">(</span><span class="va">myfile</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Green"</span><span class="op">)</span>, show_pcts <span class="op">=</span> <span class="cn">TRUE</span>, show_runnerup <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span></span></code></pre>
<p><code><a href="reference/wrangle_more_cols.html">wrangle_more_cols()</a></code> has four optional arguments: show_pcts to return results as percents instead of total votes, show_runnerup to include a column with the 2nd-place finisher, show_margin to display a column with the difference between the 1st- and 2nd-place finishers, and show_margin_2vs3 to show the difference between the 2nd- and 3rd-place finishers.</p>
</div>
</div>
<div class="section level2">
<h2 id="visualizations">Visualizations<a class="anchor" aria-label="anchor" href="#visualizations"></a>
</h2>
<p><strong>Interactive tables</strong> Use the <code><a href="reference/quick_table.html">quick_table()</a></code> or <code><a href="reference/quick_table_more_cols.html">quick_table_more_cols()</a></code> functions. See the tables vignette with <code><a href="articles/tables.html">vignette("tables", package = "elections2")</a></code> for more.</p>
<p><strong>Bar charts</strong> Use the <code>bar_graph_of_winner_pct_margins()</code> function. See the barcharts vignette with <code><a href="articles/barcharts.html">vignette("barcharts", package = "elections2")</a></code> for more info.</p>
<p><strong>Election results maps</strong> See the maps vignette: `vignette(“maps”, package = “elections2”)</p>
<p><strong>Turnout maps</strong> See the turnout maps vignette: `vignette(“map_turnout”, package = “elections2”)</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/smach/elections2/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/smach/elections2/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.mozilla.org/en-US/MPL/2.0/" class="external-link">MPL-2.0</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing elections2</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Sharon Machlis <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Sharon Machlis.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
